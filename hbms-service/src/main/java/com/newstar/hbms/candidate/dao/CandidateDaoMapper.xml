<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.newstar.hbms.candidate.dao.CandidateDao">

  <insert id="insert" parameterType="com.newstar.hbms.candidate.domain.Candidate">
    insert into Resume(
      name,
      sex,
      telephone,
      age,
      email,
      education,
      workYears,
      marital,
      location,
      industry,
      company,
      position,
      salary,
      selfEvaluation,
      other,
      keyword,
      remark,
      language,
      yn,
      createTime,
      createUser,
      updateTime,
      updateUser
    ) values (
      #{name},
      #{sex},
      #{telephone},
      #{age},
      #{email},
      #{education},
      #{workYears},
      #{marital},
      #{location},
      #{industry},
      #{company},
      #{position},
      #{salary},
      #{selfEvaluation},
      #{other},
      #{keyword},
      #{remark},
      #{language},
      1,
      now(),
      #{createUser},
      now(),
      #{updateUser}
    )
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
      select last_insert_id();
    </selectKey>
  </insert>

  <update id="update" parameterType="com.newstar.hbms.candidate.domain.Candidate">
    update Resume set
      name = #{name},
      sex = #{sex},
      telephone = #{telephone},
      age = #{age},
      email = #{email},
      education = #{education},
      workYears = #{workYears},
      marital = #{marital},
      location = #{location},
      industry = #{industry},
      company = #{company},
      position = #{position},
      salary = #{salary},
      selfEvaluation = #{selfEvaluation},
      other = #{other},
      keyword = #{keyword},
      language = #{language},
      remark = #{remark},
      updateTime = now(),
      updateUser = #{updateUser}
    where
      id = #{id}
  </update>

  <delete id="deleteByIds" parameterType="java.lang.Long">
    update Resume set yn = 0 where id in
    <foreach collection="array" open="(" close=")" separator="," item="resumeId">
      #{resumeId}
    </foreach>
  </delete>

  <select id="findByBean"
          parameterType="com.newstar.hbms.candidate.domain.Candidate"
          resultType="com.newstar.hbms.candidate.domain.Candidate">
    select * from Resume  where 1 = 1
      <if test="id != null">
        and id = #{id}
      </if>
      <if test="name != null">
        and name = #{name}
      </if>
      <if test="sex != null">
        and sex = #{sex}
      </if>
      <if test="keyword != null">
        and keyword = #{keyword}
      </if>
      <if test="education != null">
        and education = #{education}
      </if>
      <if test="position != null">
        and position = #{position}
      </if>
      <if test="yn != null">
        and yn = #{yn}
      </if>
  </select>

  <select id="findByIds"
          parameterType="com.newstar.hbms.candidate.domain.Candidate"
          resultType="com.newstar.hbms.candidate.domain.Candidate">
    select * from Resume where id in
    <foreach collection="array" open="(" close=")" separator="," item="resumeId">
      #{resumeId}
    </foreach>
  </select>

</mapper>